---
title: "Proyecto"
author: "Diego Franco, Daniel Gonzalez, Angel Carrera"
format: html
editor: visual
---

```{r echo=F, include=FALSE}
library(nortest)
library(dplyr)
library(hopkins)
library(factoextra)
library(ggrepel)
library(cluster)
library(flexclust)
library(FeatureImpCluster)
library(stringr)
library(tidyr)
library(stats)
library(graphics)
library(NbClust)
library(mclust)
library(GGally)
library(corrplot)
library(caret)
library(ggplot2)
library(kableExtra)
library(e1071)
library(rpart)
library(rpart.plot)
library(naivebayes)
library(randomForest)
library(RColorBrewer)
library(ca)
library(vcd)
```

```{r echo=F, include=FALSE}
datos <- read.csv("defun_nac.csv")
```

# Defunciones fetales y nacimientos en Guatemala

## Definición del problema

### Situacion Problemática

La falta de una atención médica adecuada durante el parto trae múltiples problemas. Por un lado, produce complicaciones que desembocan en múltiples defunciones fetales. Además, también pone en riesgo la salud y vida de la madre. Por lo tanto, el acceso a atención médica adecuada y condiciones higiénicas puede reducir el riesgo de muerte. En Guatemala fallecen anualmente cerca de 2800 fetos, por lo que un sistema de salud adecuado es imprescindible para poder mitigar el peligro de las muertes durante el parto.

Un estudio por (Kestler & Ambrosio, 2022), mostró que la atención de una emergencia obstétrica por parte de personal capacitado, puede ayudar a reducir en un 23% el riesgo de muerte del feto. También se evidenció que la mayor cantidad de defunciones fetales se da en ámbitos no hospitalarios, con el 81%. Estos partos son atendidos por comadronas o familiares que pueden no tener la preparación necesaria. Algunos de los factores que influyen en la asistencia recibida por las madres pueden ser la edad, la escolaridad de la madre y el acceso a instalaciones adecuadas.

Por otra parte, existe una brecha en la cantidad de emergencias atendidas en el área urbana y rural. 83% de los partos atendidos en el área urbana son atendidos en centros adecuados de salud, mientras que en el área rural solo 55%. Desde luego, Guatemala es el departamento que más partos atiende en centros de salud, seguido por Escuintla y Santa Rosa. (MSPAS, 2017)

En Guatemala se puede observar que la asistencia prenatal es muy baja, lo que es realmente delicado porque la falta de acceso a servicios de salud adecuados durante un embarazo puede traer graves consecuencias tanto para la madre como para el feto, en este caso se pude observar que llega al punto de contribuir a gran cantidad de defunciones fetales.

Con esta falta de calidad de atención médica, es necesario tener herramientas que ayuden a diagnosticar de una mejor manera las probabilidades de que un feto tenga problemas durante el embarazo. Además, por la falta de personal capacitado, es necesario tener mecanismos que ayuden a mejorar la etapa pre natal de las madres, previniendo emergencias y problemas.

### Problema Científico

Actualmente en Guatemala no existe una herramienta que permita determinar si una mujer tiene riesgo de perder al bebé en la etapa pre natal o en el parto. A raíz de esto crearemos un modelo que permita determinar la probabilidad de que las mujeres embarazadas tengan una defunción fetal, de forma que se puedan tomar medidas preventivas y mitigar el riesgo.

Por lo mismo el **objetivo principal** de este estudio es:

-   Determinar la probabilidad de que una mujer embarazada tenga una defunción fetal por medio de algoritmos de aprendizaje de máquina.

Dentro de los **objetivos especificos** se encuentra:

-   Determinar la relación que existe entre la educación materna y la cantidad de defunciones en Guatemala.
-   Encontrar patrones temporales en las defunciones fetales a nivel nacional.
-   Establecer las variables que más influyen en los partos exitosos y las defunciones fetales.
-   Determinar la relación que la edad de la madre y la cantidad de defunciones en Guatemala.

## Análisis exploratorio

### Descripción de limpieza hecha del dataset

Se utlizaron las bases de datos sobre defunciones fetales y nacimientos del 2010 al 2019, obtenidas en https://www.ine.gob.gt/ine/vitales/. Los datos de cada año tenían diferentes variables, por lo que se encontraron las variables en común, que son las que se describen en la parte posterior a esta. Se tuvo que realizar un encoding de diferentes variables acorde a un diccionario que se encuentra en la página web previamente indicada. Se agregó una columna a los datos que indica si el resultado del embarazo fue exitoso o fue una defunción fetal.

### Tipo de cada una de las variables de dataset.

-   DEPREG (Departamento de registro) -> Categórica nominal
-   MUPREG (Municipio de registro) -> Categórica nominal
-   MESREG (Mes de registro) -> Categórica nominal
-   AÑOREG (Año de registro) -> Categórica nominal
-   DEPOCU (Departamento de ocurrencia) -> Categórica nominal
-   MUPOCU (Municipio de ocurrencia) -> Categórica nominal
-   SEXO (de la defunción fetal) -> Categórica nominal
-   DIAOCU (Día de ocurrencia) -> Categórica nominal
-   MESOCU (Mes de ocurrencia) -> Categórica nominal
-   TIPAR (Tipo de parto) -> Categórica nominal
-   SEMGES (Semanas de gestación) -> Cuantitativa discreta
-   EDADM (Edad de la madre) -> Cuantitativa discreta
-   DEPREM (Departamento de residencia de la madre) -> Categórica nominal
-   MUPREM (Municipio de residencia de la madre) -> Categórica nominal
-   ESCIVM (Estado civil de la madre) -> Categórica nominal
-   ESCOLAM (Escolaridad de la madre) -> Categórica nominal
-   ASISREC (Asistencia recibida) -> Categórica nominal
-   SITIOOCU (Sitio de ocurrencia) -> Categórica nominal
-   TOHITE (Total de hijos tenidos) -> Cuantitativa discreta
-   TOHINM (Total de hijos nacidos muertos) -> Cuantitativa discreta
-   TOHIVI (Total de hijos vivos) -> Cuantitativa discreta

### 1. Análsis de NA y limpieza

Los datos tienen un encoding en el que se pone un número (como 99 o 999) para indicar que no se tiene información. Por lo tanto es necesario reemplazar estos números por NA.

```{r echo=F}
datos$SEXO <- ifelse(datos$SEXO == 9, NA, datos$SEXO)
datos$SEMGES <- ifelse(datos$SEMGES == 99, NA, datos$SEMGES)
datos$EDADM <- ifelse(datos$EDADM == 999, NA, datos$EDADM)
datos$DEPREM <- ifelse(datos$DEPREM == 9999, NA, datos$DEPREM)
datos$MUPREM <- ifelse(datos$MUPREM == 9999, NA, datos$MUPREM)
datos$ESCIVM <- ifelse(datos$ESCIVM == 9, NA, datos$ESCIVM)
datos$ESCOLAM <- ifelse(datos$ESCOLAM == 9, NA, datos$ESCOLAM)
datos$SITIOOCU <- ifelse(datos$SITIOOCU == 9, NA, datos$SITIOOCU)
datos$TOHITE <- ifelse(datos$TOHITE == 99, NA, datos$TOHITE)
datos$TOHINM <- ifelse(datos$TOHINM == 99, NA, datos$TOHINM)
datos$TOHIVI <- ifelse(datos$TOHIVI == 99, NA, datos$TOHIVI)
```

Además, también se tienen muchas variables con valores numéricos pero que son cualitativas. Por lo tanto, se conviertieron en factores.

```{r echo=F}
cualitativas <- c('DEPREG', 'MUPREG', 'MESREG', 'AÑOREG', 'DEPOCU', 'MUPOCU', 'SEXO', 'DIAOCU', 'MESOCU', 'TIPAR', 'DEPREM', 'MUPREM', 'ESCIVM', 'ESCOLAM', 'ASISREC', 'SITIOOCU')
datos[, cualitativas] <- lapply(datos[, cualitativas], as.factor)
```

```{r echo=F}
prop.table(colSums(is.na(datos))) * 100
```

Es posible observar que el 28% del dataset no tiene datos relacionados a la cantidad de hijos tenidos. Por otra parte, el 17% de los registros no tiene datos sobre hijos muertos, seguramente porque las madres no desean proporcionar información delicada. Hay un 22% de datos faltantes para hijos vivos. Tanto para semanas de gestación como para escolaridad, hay un 8% de datos faltantes.

Los datos faltantes no se eliminaron acá, si no que al momento de hacer clustering se obtuvieron las variables cuantitativas y a esas se les quitaron los NA.

### 2. Resúmen del conjunto de datos.

El conjunto de datos está compuesto por `r nrow(datos)` filas y `r ncol(datos)` columnas.

```{r echo=F}
summary(datos)
```

- Es posible observar que la media de semanas de gestación está en 40, indicando que el embarazo si se realizo con éxito.
- La media de la edad de las madres es de 26 años. Un 75% de las madres está por debajo de los 32 años. La madre de mayor edad tiene 57 años.
- La media de hijos tenidos es de 3. El 75% de las madres tienen 4 hijos o menos. Existe una madre con 32 hijos tenidos.
- La media de hijos fallecidos es de 0.6. Un 75% de las madres solo han tenido 1 hijo fallecido. Existe una madre que tiene 30 hijos fallecidos.
- La media de hijos vivos es de 2. El 75% de las madres tienen 3 o menos hijos vivos. Existe una madre que tiene 16 hijos vivos.


### 3. Analisis de las variables

```{r echo=F}
datos$SEXO <- ifelse(datos$SEXO == 9, NA, datos$SEXO)
datos$SEMGES <- ifelse(datos$SEMGES == 99, NA, datos$SEMGES)
datos$EDADM <- ifelse(datos$EDADM == 999, NA, datos$EDADM)

datos$DEPREM <- ifelse(datos$DEPREM == 99, NA, datos$DEPREM)
datos$MUPREM <- ifelse(datos$MUPREM == 9999, NA, datos$MUPREM)
datos$ESCIVM <- ifelse(datos$ESCIVM == 9, NA, datos$ESCIVM)

datos$ESCOLAM <- ifelse(datos$ESCOLAM == 9, NA, datos$ESCOLAM)
datos$SITIOOCU <- ifelse(datos$SITIOOCU == 9, NA, datos$SITIOOCU)
datos$TOHITE <- ifelse(datos$TOHITE == 99, NA, datos$TOHITE)
datos$TOHINM <- ifelse(datos$TOHINM == 99, NA, datos$TOHINM)
datos$TOHIVI <- ifelse(datos$TOHIVI == 99, NA, datos$TOHIVI)
```

### 3.1 Análisis de normalidad varibales cuantitativas

### Prueba de normalidad para **SEMGES**.

Inicialmente se muestra un histograma de la distribución de EDADM.

```{r echo=F}
semana_ges <- datos[datos$SEMGES != 99, ]
hist(semana_ges$SEMGES)
```

Se puede observar del histograma que hay datos muy atípicos en el extremo derecho. Es muy probable que la distribución no sea normal. Es posible observar que hay una fuerte frecuencia en el extremo derecho, como se mencionó.

A continuación se realizó un QQplot para observar la distribución de los valores de SEMGES.

```{r echo=FALSE}
qqnorm(semana_ges$SEMGES)
qqline(semana_ges$SEMGES, col="red")
```

Se puede observar del gráfico que la distribución se aleja bastante de la línea teórica. Esto indica que no existe normalidad en la distribución.

A continuación se hizo un test de normalidad con Lilliefors.

```{r echo=F}
lillie.test(semana_ges$SEMGES)
```

Es posible observar que el valor p es muy pequeño, mucho menor que el nivel de significancia de 0.05. Por lo tanto, se puede afirmar que la distribución de los datos no es normal.

### Prueba de normalidad para **EDADM**.

Inicialmente se muestra un histograma de la distribución de EDADM.

```{r echo=F}
edad_madre <- datos[datos$EDADM != 999, ]
hist(edad_madre$EDADM)
```

Es posible observar del histograma que la distribución de los datos esta sesgada hacia la izquierda. Es muy posible que no sea normal.

A continuación se realizó un QQplot para observar la distribución de los valores de EDADM.

```{r echo=FALSE}
qqnorm(edad_madre$EDADM)
qqline(edad_madre$EDADM, col="red")
```

Al observar el gráfico se puede observar que los extremos están bastante alejados de la línea teórica, por lo que es muy probable que no se tenga una distribución normal.

Finalmente se hizo un test de normalidad con Lilliefors.

```{r echo=F}
lillie.test(edad_madre$EDADM)
```

Se puede observar que el valor p es mucho menor al nivel de significancia, que es de 0.05, por lo que se puede afirmar que la distribución no sigue una distribución normal.

### Prueba de normalidad para **TOHITE**.

Inicialmente se muestra un histograma de la distribución de TOHITE.

```{r echo=F}
hijos_tenidos <- datos[datos$TOHITE != 99, ]
hist(hijos_tenidos$TOHITE)
```

Se observar del histograma que hay un fuerte sesgo hacia la izquierda. La forma de la distribución no parece normal.

A continuación se realizó un QQplot para observar la distribución de los valores de TOHITE.

```{r echo=FALSE}
qqnorm(hijos_tenidos$TOHITE)
qqline(hijos_tenidos$TOHITE, col="red")
```

Se puede observar que la gráfica tiene una forma de gradas. La distribución está bastante alejada de la línea teórica. Es muy probable que no sea normal.

Finalmente se realizó un test de normalidad con Lilliefors.

```{r echo=F}
lillie.test(hijos_tenidos$TOHITE)
```

Es posible observar que el valor de p es mucho más bajo al nivel de significancia. Se puede afirmar que la distribución no sigue una forma normal.

### Prueba de normalidad para **TOHINM**.

Inicialmente se muestra un histograma de la distribución de TOHINM.

```{r echo=F}
hijos_muertos <- datos[datos$TOHINM != 99, ]
hist(hijos_muertos$TOHINM)
```

Se puede observar que la mayor cantidad de datos se encuentra en el extemo izquierdo. La distribución no tiene forma normal.

A continuación se realizó un QQplot para observar la distribución de los valores de TOHINM.

```{r echo=FALSE}
qqnorm(hijos_muertos$TOHINM)
qqline(hijos_muertos$TOHINM, col="red")
```

El extremo derecho se aleja bastante de la línea teórica. Es muy probable que no se tenga una distribución normal de los datos.

Finalmente se hizo un test de normalidad con Lilliefors.

```{r echo=F}
lillie.test(hijos_muertos$TOHINM)
```

Se puede observar que el valor p es mucho menor que el nivel de significancia, de 0.05, por lo que se rechaza la hipótesis de que la distribución es normal.

### Prueba de normalidad para **TOHIVI**.

Inicialmente se muestra un histograma de la distribución de TOHIVI.

```{r echo=F}
hijos_vivos <- datos[datos$TOHIVI != 99, ]
hist(hijos_vivos$TOHIVI)
```

Se puede observar que se tiene un sesgo a la izquierda. La distribución no tiene formal normal.

A continuación se realizó un QQplot para observar la distribución de los valores de TOHIVI.

```{r echo=FALSE}
qqnorm(hijos_vivos$TOHIVI)
qqline(hijos_vivos$TOHIVI, col="red")
```

Se observa que la distribución tiene una forma de gradas y se aleja bastante de la línea teórica. Es muy probable que no sea normal.

```{r echo=F}
lillie.test(hijos_vivos$TOHIVI)
```

El valor de p es mucho menor que el nivel de significancia, por lo que se rechaza la hipótesis de que se tiene una distribución normal.

### 3.2 Análisis de distribución de variables cuantitativas

#### Análisis para semana de gestación

```{r echo=F}
boxplot(semana_ges$SEMGES,
  main = "Semanas de gestación",
  col = "orange",
  border = "brown",
  horizontal = TRUE,
  notch = TRUE
)
```

Es posible observar que se tienen múltiples datos atípicos. Esto se debe a la cantidad de registros donde si hubo nacimientos. Los datos atípicos son de las madres que tuvieron defunciones fetales en las semanas tempranas y medias. Los partos se dan de la semana 37 a la 42, lo que se observa en la caja. Hay una pequeña diferencia porque inicia en la semana 30.

#### Análisis para edad de la madre

```{r echo=F}
boxplot(edad_madre$EDADM,
  main = "Edad de la madre",
  col = "orange",
  border = "brown",
  horizontal = TRUE,
  notch = TRUE
)
```

Es posible observar que existen datos atípicos en el extremo superior, luego de los 50 años. La edad mínima es de 10 años. Un 50% de los datos se encuentran por debajo de aproximadamente los 27 o 28 años. Se puede observar que a partir del tercer cuartil hay más dispersión. La edad fértil de una mujer está entre los 19 y 30 años, y esta va disminuyendo hasta aproximadamente los 50 años. La mayoría de madres se encuentran entre este rango de años, pero existen datos atípicos que están arriba de los 50 años. Algo importante a resaltar es que existen madres de 10 años que se encuentran en el rango normal.

#### Análisis para total de hijos tenidos

```{r echo=F}
boxplot(hijos_tenidos$TOHITE,
  main = "Total de hijos tenidos",
  col = "orange",
  border = "brown",
  horizontal = TRUE,
  notch = TRUE
)
```

Es posible observar que el 50% de los datos se enceuntran por debajo de los 3 hijos aproximadamente. Se puede observar una gran cantidad de datos atípicos. La menor cantidad de hijos tenidos es 1. Hay bastante dispersión después del tercer cuartil. Existe un registro que tiene 32 hijos tenidos, el valor más atípico. Además, el promedio de hijos tenidos en Guatemala es de aproximadamente 6. Los datos atípicos representan mujeres que han tenido muchos hijos, como el dato de 32 que se menciona.

#### Análisis para total de hijos fallecidos

```{r echo=F}
boxplot(hijos_muertos$TOHINM,
  main = "Total de hijos fallecidos",
  col = "orange",
  border = "brown",
  horizontal = TRUE,
  notch = TRUE
)
```

Se puede observar que hay una gran cantidad de datos atípicos en esta distribución. La mayoría de datos tienen 1 hijo fallecido, que muy probablemnte sea el que se registró en el dataset. Muchas madres han tenido más de 1 hijo fallecido que son los datos atípicos, hasta un dato extremo de 30 hijos fallecidos. Esta persona puede tener una condición médica que no le permite formar los hijos correctamente.

#### Análisis para total de hijos vivos

```{r echo=F}
boxplot(hijos_vivos$TOHIVI,
  main = "Total de hijos vivos",
  col = "orange",
  border = "brown",
  horizontal = TRUE,
  notch = TRUE
)
```

Se puede observar que el 50% de los datos están por debajo de aproximadamente 2 hijos. Se tienen muchos datos atípicos y hay bastante dispersión en la distribución. El valor menor de hijos vivos es de 0 y hay personas que tienen más de 15 hijos vivos.

### 3.3 Análisis de frecuencia varibales cualitativas

A continuación se muestra la frecuencia de **DEPREG** el departamento de registro.

```{r echo=F}
departamento <- table(datos$DEPREG)
departamento
barplot(departamento, col=c("orange", "blue"))
```

La gráfica muestra que la mayor cantidad de los datos se registran en el departamento de Guatemala seguido de Alta Verapaz como el segundo más alto. Esto puede indicar que la mayoría de personas reciben asistencia en el departamento de Guatemala, independientemente de donde vivan.

A continuación se muestra la frecuencia de **MUPREG** el municipio de registro.

```{r echo=F}
municipio <- sort(table(datos$MUPREG))[1:5]
municipio
barplot(municipio, col=c("orange", "blue"))
```

La gráfica muestra que la mayor cantidad de los datos se registran en el municipio de Guatemala. Esto indica que en el departamento de Guatemala, es en la capital donde se registran la mayor cantidad de embarazos.

A continuación se muestra la frecuencia de **MESREG** el mes de registro.

```{r echo=F}
mes_re <- table(datos$MESREG)
mes_re
barplot(mes_re, col=c("orange", "blue"))
```

La gráfica muestra que los meses de registro se encuentran balanceados entre si, aunque el mes con mayor registros es enero.

A continuación se muestra la frecuencia de **AÑOREG** el año de registro.

```{r echo=F}
ano_re <- table(datos$AÑOREG)
ano_re
barplot(ano_re, col=c("orange", "blue"))
```

La gráfica muestra que los años de registro se encuentran bastante balanceados entre si, aunque el año con mayor registros es 2013.

A continuación se muestra la frecuencia de **DEPOCU** el departamento de ocurrencia.

```{r echo=F}
dep_ocu <- table(datos$DEPOCU)
dep_ocu
barplot(dep_ocu, col=c("orange", "blue"))
```

La gráfica muestra que la mayor cantidad de embarazos son ocurridos en el departamento de Guatemala seguido de Alta Verapaz como el segundo más alto.

A continuación se muestra la frecuencia de **MUPOCU** el municipio de ocurrencia.

```{r echo=F}
mun_ocu <- sort(table(datos$MUPOCU))[1:5]
barplot(mun_ocu, col=c("orange", "blue"))
```

La gráfica muestra que la mayor cantidad de embarazos son ocurridos en el municipio de Guatemala

A continuación se muestra la frecuencia de **SEXO** del registro.

```{r echo=F}
sexo <- table(datos$SEXO)
sexo
barplot(sexo, col=c("orange", "blue"))
```

La gráfica muestra que el sexo del registro mayormente son masculinos. Sin embargo, están bastante balanceados.

A continuación se muestra la frecuencia de **DIAOCU** el dia de ocurrencia.

```{r echo=F}
dia <- table(datos$DIAOCU)
dia
barplot(dia, col=c("orange", "blue"))
```

La gráfica muestra que los dias de ocurrencia estan bastante balanceados.

A continuación se muestra la frecuencia de **MESOCU** el mes de ocurrencia.

```{r echo=F}
mes <- table(datos$MESOCU)
mes
barplot(mes, col=c("orange", "blue"))
```

La gráfica muestra que al igual que con los dias los meses estan bastante balanceados pero si se puede observar que existe una mayor catidad en el mes de octubre.

A continuación se muestra la frecuencia de **TIPAR** el tipo de parto.

```{r echo=F}
tipoP <- table(datos$TIPAR)
tipoP
barplot(tipoP, col=c("orange", "blue"))
```

La gráfica muestra que la mayoria de los partos fueron de tipo simple.


A continuación se muestra la frecuencia de **DEPREM** el departamento de residencia de la madre.

```{r echo=F}
depM <- sort(table(datos$DEPREM))[1:5]
depM <- head(depM)
barplot(depM, col=c("orange", "blue"))
```

La gráfica muestra que la mayoria de las madres son residentes del departamento de Guatemala.

A continuación se muestra la frecuencia de **MUPREM** el municipio de residencia de la madre.

```{r echo=F}
munM <- sort(table(datos$MUPREM))[1:5]
barplot(munM, col=c("orange", "blue"))
```

La gráfica muestra que la mayoria de las madres son residentes del municipio de Guatemala.

A continuación se muestra la frecuencia de **ESCIVM** el estado civil de la madre.

```{r echo=F}
estadoC <- table(datos$ESCIVM)
estadoC
barplot(estadoC, col=c("orange", "blue"))
```

La gráfica muestra que la mayoria de las madres eran solteras.

A continuación se muestra la frecuencia de **ESCOLAM** la escolaridad de la madre.

```{r echo=F}
escolaridad <- table(datos$ESCOLAM)
escolaridad
barplot(escolaridad, col=c("orange", "blue"))
```

La gráfica indica que la gran mayoria de las madres recibieron al menos un grado de estudio primario, y que el segundo grupo de madres no tuvo ningun tipo de estudios.

A continuación se muestra la frecuencia de **ASISREC** la asistencia recibida.

```{r echo=F}
asistencia <- table(datos$ASISREC)
asistencia
barplot(asistencia, col=c("orange", "blue"))
```

Al observar el grafico podemos notar que la mayoria de los embarazos fueron tratados por asistencia medica.

A continuación se muestra la frecuencia de **SITIOOCU** sitio de ocurrencia.

```{r echo=F}
sitio <- table(datos$SITIOOCU)
sitio
barplot(sitio, col=c("orange", "blue"))
```

Al observar el grafico podemos observar que la mayoria de los abortos ocurrieron en un Hospital publico.

### 3.3 Matriz de correlación entre variables

```{r echo=F}
numericas <- c("SEMGES", "EDADM", "TOHITE", "TOHINM", "TOHIVI")
cualitativas <- datos[, !(names(datos) %in% numericas)]
datosT <- datos %>% mutate_at(colnames(cualitativas), function(x) as.factor(x))
datosT <- mutate_if(datos, is.numeric, scale)
numericas_norm <- datos[, numericas]
numericas_temp <- numericas_norm
numericas_norm <- numericas_norm[complete.cases(numericas_norm), ]
corr_matrix <- cor(numericas_norm)
corrplot(corr_matrix)
```

Es posible observar que existe una correlación entre la cantidad de hijos tenidos y la edad de la madre. Esto quiere decir que mientras más edad tiene una madre, más hijos ha tenido. Por otra parte, se tiene correlación entre la cantidad de hijos tenidos y la cantidad de hijos muertos. La cantidad de hijos vivos tiene una muy fuerte correlación con la cantidad de hijos tenidos. La cantidad de hijos vivos también tiene correlación con la edad de la madre. Finalmente, la cantidad de hijos nacidos muertos tiene una leve correlación inversa.

### 4. Preguntas de investigacion

#### 4.1. ¿Cual es la edad promedio de las madres registradas?

```{r echo=F}
edad <- datos$EDADM
mean(edad, na.rm = T)
```

La edad promedio de las madres que abortan es de 27.

#### 4.2. ¿Existe algún patrón temporal en las defunciones fetales?

```{r echo=F}
time_df <- subset(datos, TIPO=='muerto')
time_df$fecha <- as.Date(paste(time_df$AÑOREG, time_df$MESREG, '01', sep='-'), format = "%Y-%m-%d")
table <- table(time_df$fecha)
min_date <- min(time_df$fecha)
max_date <- max(time_df$fecha)
ts_counts <- ts(table, start = c(year(min_date), month(min_date)), frequency = 12)

plot.ts(ts_counts, main = "Serie de tiempo de defunciones fetales", xlab = "Fecha", ylab = "Cantidad")

fit <- decompose(ts_counts)
plot(fit)
```

Al observar la serie de tiempo se puede observar que hay una tendencia en la reducción de la cantidad de defunciones fetales a lo largo de los años. Un factor importante por notar es que existe una estacionalidad marcada en las defunciones fetales, se puede visualizar un ciclo que se repite aproximadamente cada año y medio en la cantidad de estas.

#### 4.3. ¿Existe algún patrón temporal en los nacimientos?

```{r echo=F}
time_df <- subset(datos, TIPO=='vivo')
time_df$fecha <- as.Date(paste(time_df$AÑOREG, time_df$MESREG, '01', sep='-'), format = "%Y-%m-%d")
table <- table(time_df$fecha)
min_date <- min(time_df$fecha)
max_date <- max(time_df$fecha)
ts_counts <- ts(table, start = c(year(min_date), month(min_date)), frequency = 12)

plot.ts(ts_counts, main = "Serie de tiempo de nacimientos", xlab = "Fecha", ylab = "Cantidad")

fit <- decompose(ts_counts)
plot(fit)
```

Al observar la serie de tiempo se puede observar que hay una tendencia relativamente cíclica donde los nacimientos bajan y suben con el pasar de los años. Un factor importante por notar es que existe una estacionalidad marcada en los nacimientos, se puede visualizar un ciclo que se repite aproximadamente cada año y medio en la cantidad de estos.

#### 4.4 ¿Existe una relación entre el departamento de registro y la atención médica recibida?

```{r}
tabla_contingencia <- table(datos$DEPREG, datos$ASISREC)
tabla_contingencia
resultado_chi_cuadrado <- chisq.test(tabla_contingencia)
resultado_chi_cuadrado
```

Al realizar una tabla de contingencia y realizar un test de chi-cuadrado es posible observar que el valor de p es menor al nivel de significancia, de 0.05. Esto quiere decir que el departamento de registro del embarazo está relacionado con la asistencia recibida.

#### 4.5 ¿Cual es el Promedio de defunciones por año?

```{r echo=F}

# Agrupar por año de registro
data_grouped_anoreg <- datos %>%
  filter(TIPO == "muerto") %>%  # filtrar los datos por tipo Vivos
  group_by(AÑOREG) %>%
  summarise(Defunciones = n()) %>%
  ungroup()

# Mostrar el resultado
ggplot(data_grouped_anoreg, aes(x = AÑOREG, y = Defunciones, fill = factor(AÑOREG))) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Defunciones fetales por año",
       x = "Año de registro",
       y = "Número de defunciones")

# Calcular el promedio de defunciones fetales por año
promedio_defunciones_anuales <- mean(data_grouped_anoreg$Defunciones)

# Mostrar el resultado
cat("El promedio de defunciones fetales por año es:", promedio_defunciones_anuales)


```

#### 4.6 ¿Cual es el Promedio de nacimientos por año?

```{r echo=F}

# Agrupar por año de registro
data_grouped_anoreg <- datos %>%
  filter(TIPO == "vivo") %>%  # filtrar los datos por tipo Vivos
  group_by(AÑOREG) %>%
  summarise(nacimientos = n()) %>%
  ungroup()

# Mostrar el resultado
ggplot(data_grouped_anoreg, aes(x = AÑOREG, y = nacimientos, fill = factor(AÑOREG))) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Nacimientos por año",
       x = "Año de registro",
       y = "Número de nacimientos")

# Calcular el promedio de defunciones fetales por año
promedio_nacimientos <- mean(data_grouped_anoreg$nacimientos)

# Mostrar el resultado
cat("El promedio de nacimientos por año es:", promedio_nacimientos)
```


#### 4.7 ¿El estado civil de la madre tiene alguna relación con la defunción fetal?

```{r}
# Agrupar por estado civil de la madre
data_grouped_escivm <- datos %>%
  filter(TIPO == "muerto") %>%
  group_by(ESCIVM) %>%
  summarise(Defunciones = n()) %>%
  ungroup()

# Visualizar resultados
ggplot(data_grouped_escivm, aes(x = ESCIVM, y = Defunciones, fill = ESCIVM)) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Defunciones fetales por estado civil de la madre",
       x = "Estado civil de la madre",
       y = "Número de defunciones fetales")

```

Al observar la tabla podemos ver que la mayoria de las defunciones fetales ocurrieron en madres solteras.

#### 4.8 ¿El estado civil de la madre tiene alguna relación con la completación del embarazo?

```{r}
# Agrupar por estado civil de la madre
data_grouped_escivm <- datos %>%
  filter(TIPO == "vivo") %>%
  group_by(ESCIVM) %>%
  summarise(Defunciones = n()) %>%
  ungroup()

# Visualizar resultados
ggplot(data_grouped_escivm, aes(x = ESCIVM, y = Defunciones, fill = ESCIVM)) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Nacimientos por estado civil de la madre",
       x = "Estado civil de la madre",
       y = "Número de nacimientos")

```

Al observar la tabla podemos ver que la mayoria de los embarazos completados ocurrieron en madres solteras.


#### 4.9 ¿Las madres con más hijos tenidos tienen una mayor proporción de defunciones fetales?

```{r}
# Agrupar por total de hijos tenidos
data_grouped_hijos <- datos %>%
  group_by(TOHITE) %>%
  summarise(Defunciones = n()) %>%
  ungroup()

# Visualizar resultados
ggplot(data_grouped_hijos, aes(x = TOHITE, y = Defunciones, fill = TOHITE)) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Defunciones fetales por total de hijos tenidos",
       x = "Total de hijos tenidos",
       y = "Número de defunciones fetales")

```

Al observar el grafico podemos ver que a medida de que se tengan mas hijos es menor la probabilidad de tener una defuncion fetal.

#### 4.10 ¿La escolaridad de la madre tienen un impacto en la tasa de defunciones fetales?

```{r echo=F}

# Agrupar por escolaridad de la madre
data_grouped_escolam <- datos %>%
  filter(TIPO == "muerto") %>%
  group_by(ESCOLAM) %>%
  summarise(Defunciones = n()) %>%
  ungroup()

# Visualizar resultados
ggplot(data_grouped_escolam, aes(x = ESCOLAM, y = Defunciones, fill = factor(ESCOLAM))) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Defunciones fetales por escolaridad de la madre",
       x = "Escolaridad de la madre",
       y = "Número de defunciones fetales")

```

Podemos observar que la mayoria de las defunciones fetales ocurren en madres con un nivel de escolaridad baja o nula.


#### 4.11 ¿La escolaridad de la madre tienen un impacto en el completamiento del embarazo?

```{r echo=F}

# Agrupar por escolaridad de la madre
data_grouped_escolam <- datos %>%
  filter(TIPO == "vivo") %>%
  group_by(ESCOLAM) %>%
  summarise(Defunciones = n()) %>%
  ungroup()

# Visualizar resultados
ggplot(data_grouped_escolam, aes(x = ESCOLAM, y = Defunciones, fill = factor(ESCOLAM))) +
  geom_bar(stat = "identity", position = "dodge") +
  theme_minimal() +
  labs(title = "Nacimientos por escolaridad de la madre",
       x = "Escolaridad de la madre",
       y = "Número de nacimientos")

```

Podemos observar que la mayoria de los nacimientos ocurren en madres con un nivel de escolaridad primaria.


#### 4.12 ¿Cómo se distribuye la asistencia médica recibida?

```{r echo=F}
tabla <- table(datos$ASISREC)
data <- as.data.frame(tabla)
colnames(data) <- c('ASISREC', 'count')
# Compute percentages
data$fraction = data$count / sum(data$count)

# Compute the cumulative percentages (top of each rectangle)
data$ymax = cumsum(data$fraction)

# Compute the bottom of each rectangle
data$ymin = c(0, head(data$ymax, n=-1))
 
# Make the plot
ggplot(data, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=ASISREC)) +
     geom_rect() +
     coord_polar(theta="y") + # Try to remove that to understand how the chart is built initially
     xlim(c(2, 4)) # Try to remove that to see how to make a pie chart

```

Se puede observar que la mayor cantidad de veces se recibe asistencia médica, que pertenece al código 1. Luego se puede observar que varias emergencias son atendidas por una comadrona. Bastantes defunciones fetales no tuvieron asistencia alguna, lo que corresponde a la porción del código 5.


#### 4.13 ¿Cuáles son las 5 semanas de gestación donde más defunciones se dan?

```{r}
temp <- datos[complete.cases(datos), ]
temp <- datos %>% filter(TIPO == 'muerto')
temp <- temp %>%
        group_by(SEMGES) %>%
        summarise(count=n())

top_semanas <- temp %>%
      top_n(n=5, wt=count)

ggplot(top_semanas, aes(x = SEMGES, y = count)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  ggtitle("Top 5 semanas con más defunciones") +
  xlab("Semanas de gestación") +
  ylab("Número de defunciones")
```

Las semanas donde más defunciones se dan van de la 36 a la 40. La mayor cantidad de defunciones se da en la semana 40, que generalmente es la semana donde se da el parto. Por lo tanto, es posible decir que la mayor cantidad de defunciones fetales se dan en el parto.

#### 4.14 ¿Cuál es la frecuencia del sitio de ocurrencia de los partos?

```{r echo=F}
tabla <- table(datos$SITIOOCU)
data <- as.data.frame(tabla)
colnames(data) <- c('SITIOOCU', 'count')
# Compute percentages
data$fraction = data$count / sum(data$count)

# Compute the cumulative percentages (top of each rectangle)
data$ymax = cumsum(data$fraction)

# Compute the bottom of each rectangle
data$ymin = c(0, head(data$ymax, n=-1))
 
# Make the plot
ggplot(data, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=SITIOOCU)) +
     geom_rect() +
     coord_polar(theta="y") + # Try to remove that to understand how the chart is built initially
     xlim(c(2, 4)) # Try to remove that to see how to make a pie chart

```

La mayoría de defunciones se dán en hospitales públicos. Este dato es importante, porque puede indicar alguna deficiencia en este tipo de hospitales. Interesantemente, la siguiente categoría en defunciones fetales es en domicilios, correspondiente al código 6. El seguro social y hospitales privados reportan una cantidad muy similar de defunciones.

#### 4.15 ¿Existe alguna relación entre la edad de la madre y el resultado del embarazo?

```{r echo=F}
tabla <- table(datos$EDADM, datos$TIPO)
resultado_chi_cuadrado <- chisq.test(tabla)
resultado_chi_cuadrado
```

Es posible observar que si hay una relación entre la edad de la madre y el resultado del embarazo. Esto se observa en el valor de p, que es menor al nivel de significancia.

#### 4.16 ¿En que sitio de ocurrencia se producen más defunciones?

```{r echo=F}
temp <- datos %>% filter(TIPO == 'muerto')
temp <- table(temp$SITIOOCU)
barplot(temp, col=c("orange", "blue"))
```

Se puede observar que la mayor cantidad de nacimientos se dan en un hospital público y luego en domicilios. Los domicilios representan un buen porcentaje, sin embargo, 

#### 4.17 Cantidad de defunciones fetales por edad

```{r echo=F}
temp <- datos %>% filter(TIPO == 'muerto')
temp <- temp %>%
        group_by(EDADM) %>%
        summarise(count=n())

ggplot(temp, aes(x = EDADM, y = count)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  ggtitle("Defunciones por edad de la madre") +
  xlab("Edad de la madre") +
  ylab("Número de defunciones")
```

Al observar las defunciones por edad de la madre, es posible observar que hay un pico cerca de los 25 años. Mientras más grande es una mujer, se tienen menos defunciones. Lo mismo sucede mientras más jóven es una mujer. Es importante notar que las niñas tienen pocas defunciones.

#### 4.18 Cantidad de nacimientos por edad

```{r echo=F}
temp <- datos %>% filter(TIPO == 'vivo')
temp <- temp %>%
        group_by(EDADM) %>%
        summarise(count=n())

ggplot(temp, aes(x = EDADM, y = count)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  ggtitle("Nacimientos por edad de la madre") +
  xlab("Edad de la madre") +
  ylab("Número de nacimientos")
```

Es posible observar de la gráfica que mientras más grande es la mujer, se tienen menos cantidad de nacimientos. Se tiene un máximo cerca de los 25 años.

#### 4.19 Análisis de correspondencia entre la edad de la madre y el resultado del embarazo

```{r echo=F}
tabla <- table(datos$TIPO, datos$EDADM)
assocstats(tabla)$cramer
```

Al obtener la medida V de Cramer, se puede observar que existe una relación baja entre la edad de la madre y el resultado del embarazo. Anteriormente se observó que las madres entre los 20 y 30 años son las que más nacimientos y defunciones tienen, entonces no se puede realizar una diferenciación importante.

#### 4.20 Análisis de correspondencia entre la escolaridad de la madre y el resultado del embarazo

```{r echo=F}
tabla <- table(datos$TIPO, datos$ESCOLAM)
assocstats(tabla)$cramer
```

Es posible observar por la medida V de Cramer que existe una baja relación entre la escolaridad de la madre y el resultado del embarazo.

#### 4.21 ¿Cuáles son las variables que más influyen en el resultado de un embarazo?

```{r echo=F}

df <- na.omit(datos)
df <- select(df, -SEMGES)

modelo <- rpart(TIPO ~ ., data = df, method = "class", control=rpart.control(maxdepth=5))
rpart.plot(modelo, box.palette = "green")
modelo$variable
```

Al realizar un árbol de decisión para determinar si un embarazo es exitoso o no, es posible observar que se toma la variable de **TOHINM** que es la cantidad de hijos nacidos muertos como la más importante. Luego se tiene **MUPREG** que es el municipio de registro. Esto último indica que existe una relación entre las regiones en donde se da el parto y el éxito del embarazo.


## 5. Clustering

### 5.1 Determinar si vale la pena agrupar

```{r echo=F}
set.seed(123)

h<-hopkins(numericas_norm)
distancia <- dist(numericas_norm)

# fviz_dist(distancia, show_labels = F)
```

Se calculó el estadístico de Hopkins para determinar si es válido agrupar los datos. El valor de este es de `r round(h, 2)`, por lo que si vale la pena intentar un agrupamiento.

### 5.2 Determinar la cantidad de grupos para el cluster

#### Elección de variables numéricas para clustering

Al observar la matriz de correlación, es posible observar que la cantidad de hijos vivos tiene una alta correlación con hijos tenidos. Por lo tanto, es posible que exista redundancia. Se quitó la cantidad de hijos vivos para el clustering, de forma que se tenga un mejor agrupamiento
```{r echo=F}
numericas_norm <- numericas_norm[, c('SEMGES', 'EDADM', 'TOHITE', 'TOHINM')]
```

#### Metodo de wss y silueta

```{r echo=F, metodo_wss}

set.seed(123)

wss <- 0

wss <- 0
for (i in 1:10) {
  wss[i] <- sum(kmeans(numericas_norm, centers=i)$withinss)
}

## 5.4 Grafica de lineas y puntos bow
plot(1:10, wss, type="bow", xlab="Cantidad de grupos", ylab="wss")

#fviz_nbclust(numericas_norm, kmeans, method="wss")
fviz_nbclust(numericas_norm, kmeans, method="silhouette")
```

Es posible observar de la gráfica del codo que la cantidad de grupos óptima son 2. La silueta indica lo mismo, así que se procederá a realizar esta cantidad.

### 5.3 Por k medias

#### 5.3.1 Agrupamiento

```{r kmedias}
set.seed(123)
km <- kmeans(numericas_norm, centers = 2, iter.max = 100)

# find number of observations in each cluster
table(km$cluster)
```

```{r}
fviz_cluster(km, numericas_norm)
```

#### 5.3.2 Calidad del agrupamiento segun el método de la silueta

```{r}
set.seed(123)
m <- data.frame(withinss = km$withinss, size = km$size)
ggplot(m, aes(size, withinss)) +
    geom_point() +
    geom_smooth(method = "lm") +
    labs(x = "cardinalidad (size)", y = "magnitud (whithinss)") +
    geom_text_repel(label = rownames(m))
silueta <- silhouette(km$cluster, distancia)
mean <- mean(silueta[, 3])
mean
```

La silueta es de `r round(mean, 2)`, lo cual es un valor relativamente alto que indica que con 2 grupos se genera un agrupamiento aceptable.

```{r}
set.seed(123)
res <- kcca(numericas_norm, 2)
importance <- FeatureImpCluster(res, as.data.table(numericas_norm))
plot(importance)
barplot(res, bycluster = T)
```

#### 5.3.3 Clasificacion de los grupos

```{r}
df <- datos[complete.cases(numericas_temp), ]
df$grupo <- km$cluster

grupo1 <- df[df$grupo == 1,]
grupo2 <- df[df$grupo == 2,]

```

##### Grupo 1

```{r}
summary(grupo1[,numericas])
str(grupo1)
sort(prop.table(table(grupo1$DEPREG))*100, decreasing=T)
sort(prop.table(table(grupo1$TIPAR))*100, decreasing=T)
sort(prop.table(table(grupo1$DEPREM))*100, decreasing=T)
sort(prop.table(table(grupo1$ESCIVM))*100, decreasing=T)
sort(prop.table(table(grupo1$ESCOLAM))*100, decreasing=T)
sort(prop.table(table(grupo1$SEXO))*100, decreasing=T)
sort(prop.table(table(grupo1$MESREG))*100, decreasing=T)
sort(prop.table(table(grupo1$ASISREC))*100, decreasing=T)
sort(prop.table(table(grupo1$SITIOOCU))*100, decreasing=T)
```

Características principales del grupo:

- En promedio las madres tienen una edad de 34 años.
- Las edades de las madres en este grupo van de 26 a 57. El 50% de las madres tienen una edad por debajo de los 33 años.
- El promedio del total de hijos tenidos es de aproximadamente 5.
- El 58% de madres de este grupo están casadas. El 41% están solteras.
- El 46% de las madres del grupo no tuvieron escolaridad alguna. El 33% llegó a primaria y un 12% llegó a diversificado.
- El 51% de los fetos de este grupo son de sexo masculino y el 48% de sexo femenimo.


##### Grupo 2

```{r}
summary(grupo2[,numericas])
str(grupo2)

sort(prop.table(table(grupo2$DEPREG))*100, decreasing=T)
sort(prop.table(table(grupo2$TIPAR))*100, decreasing=T)
sort(prop.table(table(grupo2$DEPREM))*100, decreasing=T)
sort(prop.table(table(grupo2$ESCIVM))*100, decreasing=T)
sort(prop.table(table(grupo2$ESCOLAM))*100, decreasing=T)
sort(prop.table(table(grupo2$SEXO))*100, decreasing=T)
sort(prop.table(table(grupo2$MESREG))*100, decreasing=T)
sort(prop.table(table(grupo2$ASISREC))*100, decreasing=T)
sort(prop.table(table(grupo2$SITIOOCU))*100, decreasing=T)
```

Características principales del grupo:

- En promedio las madres tienen una edad de 22 años.
- Las edades de las madres en este grupo van de 10 a 28 años. El 50% de las madres tienen una edad por debajo de los 22 años.
- El promedio del total de hijos tenidos es de 2.
- El 61% de las madres de este grupo son solteras y el 35% son casadas.
- El 41% de las madres del grupo llegó a primaria. El 27% no tiene educación, un 15% llegó a básico y otro 15% a diversificado.
- El 51% de los fetos de este grupo son de sexo masculino y el 48% de sexo femenimo.

#### Identificación de grupos

- Grupo 1: Madres de una edad avanzada, casadas, sin escolaridad, con una cantidad alta de hijos tenidos.

- Grupo 2: Madres jóvenes, solteras, con educación primaria, con una cantidad relativamente baja de hijos.

### Resúmen del analisis exploratorio 

Luego de realizar el análisis exploratorio sobre los datos de embarazos en Guatemala desde el 2010 hasta el 2019, de forma general podemos concluir que Guatemala es lastimosamente un país donde la cantidad de defunciones fetales es muy alta, teniendo un promedio de 2,838 defunciones fetales por año, esta cantidad es la misma para los nacimientos por año en el país. Cabe destacar que más del 50% de las defunciones fetales ocurren enntre la semana 36 a la 50 de gestación pero mayormente se dan en la semana 40 por lo que indica que los fetos ya habian llegado a desarrollarse bastante, esto ocurre en todas las regiones de nuestro país y muy tristemente en todo tipo de mujeres. 
La mayoria de las defunciones fetales ocurren en mujeres de entre 20 y 30 años, aunque el 75% de las mujeres tienen menos de 28 años. A pesar de ello podemos encontrar niñas de tan solo 10 años que han tenido que enfrentar la muerte de su hijo.

Normalmente las mujeres tienen 1 hijo en el parto pero existe un 6.6% de mujeres que tienen 2. De las madres también se obtuvo que un 39%, tienen una educación primaria y un 26% tienen educación nula, se obtuvo que sobre las defunciones fetales ocurren en mujeres que no tienen educación, mientras que la mayor cantidad de nacimientos se da sobre mujeres que al menos tienen un grado primario de educación.

Sobre datos un poco más específicos se pudo observar que la edad de la madre no juega un papel importante ni en la defunción del feto ni en el nacimiento del mísmo, lo cual se puede validar con el 0.15 de la medida V de cramer entre estas varibales. Aunque se pudo observar la tendencia que indica que mientras más grande la mujer se presenta una menor cantidad tanto de nacimientos como de defunciones.

También se determinó que la escolaridad de la madre tienen una correspondencia mucho menor a la de la edad, con un 0.09 de la medida V de cramer se puede afirmar que el nivel educativo de la madre no influye en el resultado del embarazo.

Se logró detectar dos grupos bastante marcados dentro de los datos analisados:
- El primero son aquellas mujeres que tienen una edad relativamente alta en promedio 33 años, que su nivel educativo es prácticametne nulo, están casadas y tienen una familia numerosa con un promedio de casi 5 hijos en total.
- El segundo grupo son aquellas mujeres jovenes en promedio 22 años, que en su gran mayoría alcanzan el nievel primario de educación, son soltera y tienen en promedio 2 hijos en total.

Una tendencia interesante que se pudo observar es la reducción de la cantidad de defunciones fetales a lo largo de los años, lo que nos da un poco de esperanza porque se puede visualizar un ciclo que se repite aproximadamente cada año y medio en donde la cantidad de estas reduce.

Por último cabe destacar que al realizar un árbol de decisión las variables que más importancia tienen a la hora de predecir si un embarazo será exitoso o no es la cantidad de hijos nacidos muertos. En segundo lugar se toma el municipio de registro, denotando así una alta relación entre la región en donde se da el parto y el éxito del mismo.

### Conclusiones de siguientes pasos por seguir

A continuación se usarán los principales resultados del análisis exploratorio, como la importancia de las variables de total de hijos tenidos muertos; el municipio de registro; los grupos creados por el clustering; la atención médica recibida, etc. Se investigarán modelos de machine learning que se adequén a los datos obtenidos y que utilicen las variables más significativas para poder realizar predicciones acertadas sobre el riesgo que tiene una madre de tener una defunción fetal. También se determinará si variables como la edad de la madre o su escolaridad pueden ser beneficiosas al momento de aplicar un modelo. Se evaluarán estos modelos y se determinará el nivel de complejidad necesario para que puedan tener un buen resultado. Además, se investigará si se pueden tener resultados secundarios a partir de la aplicación de los modelos.

### Referencias

-   Kestler, E., & Ambrosio, G. (2022). Nacido muerto en la comunidad y su relación con la morbilidad materna aguda y grave. Revista Médica (Colegio de Médicos Y Cirujanos de Guatemala), 161(2), 105--112. https://doi.org/10.36109/rmg.v161i2.484MSPAS. (2017). VI

-   Encuesta Nacional de Salud Materno Infantil (ENSMI) 2014-2015 Informe Final. https://www.ine.gob.gt/sistema/uploads/2021/04/27/20210427195413QDinUvuRa9GjopyXaTuNMXc3gd6Jq1Q1.pdf
